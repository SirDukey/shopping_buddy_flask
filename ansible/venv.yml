---
- hosts: all
  tasks:
    - name: Ensure package for python virtual environment is installed
      apt:
        name: python3-venv
        state: latest
        update-cache: yes
      become: yes

    - name: Create Python virtual environment
      command:
        cmd: python3 -m venv /home/ubuntu/shopping_buddy_flask/venv
        creates: "/home/ubuntu/shopping_buddy_flask/venv"

    - name: Install Packages from a Requirements File
      ansible.builtin.pip:
        virtualenv: /home/ubuntu/shopping_buddy_flask/venv
        requirements: /home/ubuntu/shopping_buddy_flask/requirements.txt